[2025-12-05 11:07:52] ======================================================================
[2025-12-05 11:07:52] GPU ENCODING BENCHMARK STARTED
[2025-12-05 11:07:52] ======================================================================
[2025-12-05 11:07:52] 
--- SYSTEM INFORMATION ---
[2025-12-05 11:07:52]   hostname: ybh-compilation
[2025-12-05 11:07:52]   platform: Windows
[2025-12-05 11:07:52]   python: 3.13.9
[2025-12-05 11:07:52]   gpu_name: NVIDIA GeForce RTX 5060 Ti
[2025-12-05 11:07:52]   driver_version: 581.57
[2025-12-05 11:07:52]   gpu_memory_mb: 16311
[2025-12-05 11:07:52]   pcie_gen: 1
[2025-12-05 11:07:52]   pcie_width: 8
[2025-12-05 11:07:52]   gpu_clock_mhz: 2572
[2025-12-05 11:07:52]   mem_clock_mhz: 14001
[2025-12-05 11:07:52]   gpu_temp_c: 36
[2025-12-05 11:07:52]   power_draw_w: 21.03
[2025-12-05 11:07:52]   cpu_name: 12th Gen Intel(R) Core(TM) i7-12700F
[2025-12-05 11:07:52] 
--- CHECKING NVENC SUPPORT ---
[2025-12-05 11:07:52]   h264_nvenc available: True
[2025-12-05 11:07:52] 
--- FINDING TEST VIDEOS ---
[2025-12-05 11:07:53]   Found: ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4
[2025-12-05 11:07:53]     Resolution: 3840x2160
[2025-12-05 11:07:53]     Duration: 116.3s, FPS: 25.0, Size: 224.13MB
[2025-12-05 11:07:53]   Found: ABC_OS_Ifyoureazombieandyouarehungry_nyv-26Sep-2025-15-37-32.mp4
[2025-12-05 11:07:53]     Resolution: 3840x2160
[2025-12-05 11:07:53]     Duration: 132.4s, FPS: 25.0, Size: 1293.89MB
[2025-12-05 11:07:53]   Found: ABC_OS_Zombiebeachparty_nyv-02Sep-2025-10-56-58.mp4
[2025-12-05 11:07:53]     Resolution: 3840x2160
[2025-12-05 11:07:53]     Duration: 160.2s, FPS: 25.0, Size: 1575.27MB
[2025-12-05 11:07:53]   Found: ABC_OS_Zombiesmarchingonebyone_nyv-26Sep-2025-15-20-25.mp4
[2025-12-05 11:07:53]     Resolution: 3840x2160
[2025-12-05 11:07:53]     Duration: 192.8s, FPS: 25.0, Size: 377.05MB
[2025-12-05 11:07:53] 
--- OVERLAY PNG ---
[2025-12-05 11:07:53]   Found overlay: ABC_English.png
[2025-12-05 11:07:54] 
--- USING TEST VIDEO: ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 ---
[2025-12-05 11:07:54] 
======================================================================
[2025-12-05 11:07:54] BOTTLENECK DIAGNOSIS - Finding the root cause
[2025-12-05 11:07:54] ======================================================================
[2025-12-05 11:07:54] 
==================================================
[2025-12-05 11:07:54] BOTTLENECK DIAGNOSIS TESTS
[2025-12-05 11:07:54] ==================================================
[2025-12-05 11:07:54] 
[A] GPU-ONLY PIPELINE (NVDEC -> NVENC)
[2025-12-05 11:07:54]     If this is slow: GPU hardware issue
[2025-12-05 11:07:54] Running: GPU-only pipeline
[2025-12-05 11:07:54] Command: ffmpeg -y -hwaccel cuda -hwaccel_output_format cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v h264_nvenc -preset p3 -c:a copy -f null -
[2025-12-05 11:08:08]   Elapsed: 13.66s, Speed: 6.37x, FPS: 0.0
[2025-12-05 11:08:08]     -> GPU processing: 6.37x realtime
[2025-12-05 11:08:08] 
[B] CPU DECODE -> GPU ENCODE (PCIe upload test)
[2025-12-05 11:08:08]     If slower than [A]: PCIe upload is bottleneck
[2025-12-05 11:08:08] Running: CPU decode -> GPU encode
[2025-12-05 11:08:08] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v h264_nvenc -preset p3 -c:a copy -f null -
[2025-12-05 11:08:38]   Elapsed: 30.53s, Speed: 1.4x, FPS: 0.0
[2025-12-05 11:08:38]     -> With CPU decode: 1.4x realtime
[2025-12-05 11:08:38] 
[C] GPU DECODE -> CPU ENCODE (PCIe download test)
[2025-12-05 11:08:38]     If slower than [A]: PCIe download is bottleneck
[2025-12-05 11:08:38] Running: GPU decode -> CPU encode
[2025-12-05 11:08:38] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v libx264 -preset ultrafast -crf 23 -c:a copy -f null -
[2025-12-05 11:09:30]   Elapsed: 51.78s, Speed: 1.44x, FPS: 0.0
[2025-12-05 11:09:30]     -> With GPU decode + CPU encode: 1.44x realtime
[2025-12-05 11:09:30] 
[D] CPU-ONLY PIPELINE (baseline)
[2025-12-05 11:09:30]     Baseline for comparison
[2025-12-05 11:09:30] Running: CPU-only pipeline
[2025-12-05 11:09:30] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v libx264 -preset ultrafast -crf 23 -c:a copy -f null -
[2025-12-05 11:10:37]   Elapsed: 66.97s, Speed: 0.579x, FPS: 0.0
[2025-12-05 11:10:37]     -> CPU only: 0.579x realtime
[2025-12-05 11:10:37] 
[E] COMPLEX FILTER TEST (forces CPU-GPU sync)
[2025-12-05 11:10:37]     If much slower: CPU-GPU data transfer is bottleneck
[2025-12-05 11:10:37] Running: With filter chain
[2025-12-05 11:10:37] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -vf scale=1920:1080,eq=brightness=0.01 -c:v h264_nvenc -preset p3 -c:a copy -f null -
[2025-12-05 11:11:14]   Elapsed: 36.96s, Speed: 1.73x, FPS: 0.0
[2025-12-05 11:11:14]     -> With filters: 1.73x realtime
[2025-12-05 11:11:14] 
[F] DISK READ TEST (decode to null)
[2025-12-05 11:11:14]     Tests storage read speed
[2025-12-05 11:11:14] Running: Disk read + decode
[2025-12-05 11:11:14] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -f null -
[2025-12-05 11:11:39]   Elapsed: 25.29s, Speed: 4.7x, FPS: 0.0
[2025-12-05 11:11:39]     -> Disk read: 4.7x realtime
[2025-12-05 11:11:39] 
--------------------------------------------------
[2025-12-05 11:11:39] DIAGNOSIS ANALYSIS:
[2025-12-05 11:11:39] --------------------------------------------------
[2025-12-05 11:11:39] 
  GPU Pipeline Speed: 6.37x
[2025-12-05 11:11:39]   WARNING: CPU decode slows down by 355%
[2025-12-05 11:11:39]   -> Possible PCIe UPLOAD bottleneck
[2025-12-05 11:11:39]   GPU encode is 11.0x faster than CPU
[2025-12-05 11:11:39]   WARNING: Filters slow down by 268%
[2025-12-05 11:11:39]   -> CPU-GPU sync overhead detected
[2025-12-05 11:11:39]   WARNING: Disk read may be limiting (4.7x vs 6.37x)
[2025-12-05 11:11:39] 
==================================================
[2025-12-05 11:11:39] DECODING BENCHMARKS
[2025-12-05 11:11:39] ==================================================
[2025-12-05 11:11:39] Running: Decoding (CPU)
[2025-12-05 11:11:39] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -f null -
[2025-12-05 11:12:05]   Elapsed: 25.39s, Speed: 3.49x, FPS: 0.0
[2025-12-05 11:12:05] Running: Decoding (GPU NVDEC)
[2025-12-05 11:12:05] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -f null -
[2025-12-05 11:12:28]   Elapsed: 23.83s, Speed: 4.26x, FPS: 0.0
[2025-12-05 11:12:28] 
==================================================
[2025-12-05 11:12:28] PURE ENCODING BENCHMARKS (no filters)
[2025-12-05 11:12:28] ==================================================
[2025-12-05 11:12:28] Running: Pure encoding (CPU, preset=ultrafast)
[2025-12-05 11:12:28] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v libx264 -preset ultrafast -crf 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_pure_cpu_ultrafast.mp4
[2025-12-05 11:13:31]   Elapsed: 62.94s, Speed: 0.576x, FPS: 0.0
[2025-12-05 11:13:31] Running: Pure encoding (GPU, preset=p1)
[2025-12-05 11:13:31] Command: ffmpeg -y -hwaccel cuda -hwaccel_output_format cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v h264_nvenc -preset p1 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_pure_gpu_p1.mp4
[2025-12-05 11:13:41]   Elapsed: 9.96s, Speed: 8.11x, FPS: 0.0
[2025-12-05 11:13:41] Running: Pure encoding (GPU, preset=p3)
[2025-12-05 11:13:41] Command: ffmpeg -y -hwaccel cuda -hwaccel_output_format cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v h264_nvenc -preset p3 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_pure_gpu_p3.mp4
[2025-12-05 11:13:55]   Elapsed: 13.73s, Speed: 6.69x, FPS: 0.0
[2025-12-05 11:13:55] Running: Pure encoding (GPU, preset=p5)
[2025-12-05 11:13:55] Command: ffmpeg -y -hwaccel cuda -hwaccel_output_format cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -c:v h264_nvenc -preset p5 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_pure_gpu_p5.mp4
[2025-12-05 11:14:23]   Elapsed: 27.67s, Speed: 2.36x, FPS: 0.0
[2025-12-05 11:14:23] 
==================================================
[2025-12-05 11:14:23] PNG OVERLAY BENCHMARKS
[2025-12-05 11:14:23] ==================================================
[2025-12-05 11:14:23] Running: PNG overlay (CPU, preset=fast)
[2025-12-05 11:14:23] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_English.png -filter_complex [0:v][1:v]overlay=10:10 -c:v libx264 -preset fast -crf 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_overlay_cpu_fast.mp4
[2025-12-05 11:19:22]   Elapsed: 299.18s, Speed: 0.217x, FPS: 0.0
[2025-12-05 11:19:22] Running: PNG overlay (GPU, preset=p3)
[2025-12-05 11:19:22] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_English.png -filter_complex [0:v][1:v]overlay=10:10 -c:v h264_nvenc -preset p3 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_overlay_gpu_p3.mp4
[2025-12-05 11:20:19]   Elapsed: 57.60s, Speed: 0.377x, FPS: 0.0
[2025-12-05 11:20:19] 
==================================================
[2025-12-05 11:20:19] TEXT OVERLAY BENCHMARKS (drawtext)
[2025-12-05 11:20:19] ==================================================
[2025-12-05 11:20:19] Running: Filter test (CPU, preset=fast)
[2025-12-05 11:20:19] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -vf eq=brightness=0.02:contrast=1.1 -c:v libx264 -preset fast -crf 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_text_cpu_fast.mp4
[2025-12-05 11:25:19]   TIMEOUT after 300s
[2025-12-05 11:25:19] Running: Filter test (GPU, preset=p3)
[2025-12-05 11:25:20] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -vf eq=brightness=0.02:contrast=1.1 -c:v h264_nvenc -preset p3 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_text_gpu_p3.mp4
[2025-12-05 11:26:14]   Elapsed: 54.92s, Speed: 0.234x, FPS: 0.0
[2025-12-05 11:26:14] 
==================================================
[2025-12-05 11:26:14] COMBINED FILTER BENCHMARKS (overlay + text)
[2025-12-05 11:26:14] ==================================================
[2025-12-05 11:26:14] Running: Combined filters (CPU, preset=fast)
[2025-12-05 11:26:14] Command: ffmpeg -y -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_English.png -filter_complex [0:v][1:v]overlay=10:10,eq=brightness=0.02 -c:v libx264 -preset fast -crf 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_combined_cpu_fast.mp4
[2025-12-05 11:31:14]   TIMEOUT after 300s
[2025-12-05 11:31:15] Running: Combined filters (GPU, preset=p3)
[2025-12-05 11:31:15] Command: ffmpeg -y -hwaccel cuda -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 -i C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\ABC_English.png -filter_complex [0:v][1:v]overlay=10:10,eq=brightness=0.02 -c:v h264_nvenc -preset p3 -rc vbr -cq 23 -maxrate 9M -bufsize 12M -c:a copy C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\test_combined_gpu_p3.mp4
[2025-12-05 11:32:11]   Elapsed: 56.40s, Speed: 0.304x, FPS: 0.0
[2025-12-05 11:32:11] 
======================================================================
[2025-12-05 11:32:11] BENCHMARK SUMMARY
[2025-12-05 11:32:11] ======================================================================
[2025-12-05 11:32:11] 
System: ybh-compilation
[2025-12-05 11:32:11] GPU: NVIDIA GeForce RTX 5060 Ti
[2025-12-05 11:32:11] PCIe: Gen 1 x8
[2025-12-05 11:32:11] Video: ABC_OS_Fivezombiesjumpinginthemiddleofthenight_nyv-26Sep-2025-15-28-59.mp4 (3840x2160, 116.3s)
[2025-12-05 11:32:11] 
--- ENCODING SPEEDS ---
[2025-12-05 11:32:11] Test                                Time (s)     Speed      FPS       
[2025-12-05 11:32:11] ----------------------------------------------------------------------
[2025-12-05 11:32:11] decode_cpu                          25.4s        3.49x      N/A       
[2025-12-05 11:32:11] decode_gpu                          23.8s        4.26x      N/A       
[2025-12-05 11:32:11] encode_cpu_ultrafast                62.9s        0.576x     N/A       
[2025-12-05 11:32:11] encode_gpu_p1                       10.0s        8.11x      N/A       
[2025-12-05 11:32:11] encode_gpu_p3                       13.7s        6.69x      N/A       
[2025-12-05 11:32:11] encode_gpu_p5                       27.7s        2.36x      N/A       
[2025-12-05 11:32:11] overlay_cpu_fast                    299.2s       0.217x     N/A       
[2025-12-05 11:32:11] overlay_gpu_p3                      57.6s        0.377x     N/A       
[2025-12-05 11:32:11] text_cpu_fast                       FAILED
[2025-12-05 11:32:11] text_gpu_p3                         54.9s        0.234x     N/A       
[2025-12-05 11:32:11] combined_cpu_fast                   FAILED
[2025-12-05 11:32:11] combined_gpu_p3                     56.4s        0.304x     N/A       
[2025-12-05 11:32:11] 
Results saved to:
[2025-12-05 11:32:11]   Log: C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\benchmark_results_20251205_110752.txt
[2025-12-05 11:32:11]   JSON: C:\Users\uzair\softwares\video-compilation-2.0\test_gpu\benchmark_results_20251205_113211.json
[2025-12-05 11:32:11] 
======================================================================
[2025-12-05 11:32:11] KEY METRICS FOR COMPARISON (copy this)
[2025-12-05 11:32:11] ======================================================================
[2025-12-05 11:32:11] PC: ybh-compilation
[2025-12-05 11:32:11] GPU: NVIDIA GeForce RTX 5060 Ti
[2025-12-05 11:32:11] PCIe: Gen 1 x8
[2025-12-05 11:32:11] Driver: 581.57
[2025-12-05 11:32:11] 
DIAGNOSIS SPEEDS (x realtime):
[2025-12-05 11:32:11]   [A] GPU-only (NVDEC->NVENC): 6.37x
[2025-12-05 11:32:11]   [B] CPU decode->GPU encode: 1.4x
[2025-12-05 11:32:11]   [C] GPU decode->CPU encode: 1.44x
[2025-12-05 11:32:11]   [D] CPU-only:               0.579x
[2025-12-05 11:32:11]   [E] With filters:           1.73x
[2025-12-05 11:32:11]   [F] Disk read:              4.7x
[2025-12-05 11:32:11] 
INTERPRETATION:
[2025-12-05 11:32:11]   - If [A] is slow: GPU hardware/driver issue
[2025-12-05 11:32:11]   - If [B] << [A]: PCIe UPLOAD bottleneck (CPU->GPU)
[2025-12-05 11:32:11]   - If [C] << [D]: PCIe DOWNLOAD bottleneck (GPU->CPU)
[2025-12-05 11:32:11]   - If [E] << [A]: CPU-GPU sync overhead
[2025-12-05 11:32:11]   - If [F] is slow: Storage bottleneck
[2025-12-05 11:32:11] 
======================================================================
[2025-12-05 11:32:11] BENCHMARK COMPLETE
[2025-12-05 11:32:11] ======================================================================
